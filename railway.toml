[build]
builder = "DOCKERFILE"
dockerfilePath = "./Dockerfile.keystone"

[deploy]
startCommand = "./node_modules/.bin/keystone start"
healthcheckPath = "/api/graphql"
healthcheckTimeout = 180
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[deploy.env]
PORT = "3000"
NODE_ENV = "production"
# This is a placeholder - Railway will automatically inject the real DATABASE_URL
DATABASE_URL = "${RAILWAY_POSTGRESQL_CONNECTION_URL}"
SESSION_SECRET = "your_actual_production_secret_minimum_32_chars_long_change_this" 